<div class="modal-content">
  <!-- 4.モーダルのヘッダ -->
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal">
      <span aria-hidden="true">&times;</span>
    </button>
    <h4 class="modal-title" id="modal-label">下記のコードをコピーしてブラウザのコンソールに貼り付けてください</h4>
  </div>
  <button type="button" id="copy-button" class="btn btn-primary" style="display: block; margin: auto; margin-top:10px;">コードをコピー</button>
  <!-- 5.モーダルのボディ -->
  <div class="modal-body">
    <textarea id="copyForm" rows="8" cols="80" readonly="readonly" style="width:100%;margin:auto;">
      (function() { const alink = document.getElementsByTagName('A'); for (let i = 0; i < alink.length; i++) { alink[i].href = "javascript:void(0)"; } alert('可変させたい要素をクリックして選択してください\nもう一度クリックするとデータを送信します'); function color(content) {
      content.style['background-color'] = 'rgb(255,0,0)'; } function uncolor(content) { if (content) content.style['background-color'] = ''; } function hash(str) { return str.substr(0, 10); } let content = null; let data = {};
      document.addEventListener('click', e => { if (content === e.target) { uncolor(content); if (!window.confirm('要素: ' + content.outerHTML.substr(0, 10) + '...を可変にしますか?')) { return; } const location = []; let now = content; while (now.parentElement) {
      for (let i = 0; i < now.parentElement.children.length; i++) { if (now.parentElement.children[i] === now) { now = now.parentElement; location.unshift(i); break; } } } const h = hash(content.innerHTML); var data = { host: window.location.origin, path:
      window.location.pathname, hash_i: h, location: location }; data = JSON.stringify(data); alert('次に表示されるJSONをセッティングのJSON欄にペースとしてください。'); prompt("Ctl+CでコピーしてJSON欄に貼り付けてください", data); } else { uncolor(content); content = e.target; color(content); } });
      })();
    </textarea>
  </div>
  <!-- 6.モーダルのフッタ -->
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" data-dismiss="modal">閉じる</button>
  </div>
</div>

<script type="text/javascript">
  $('#copy-button').on('click', function () {
    var text = document.getElementById('copyForm')
    text.select()
    var suc = document.execCommand('copy')
    if (suc) {
      alert('コピーしました。')
    }
  })
</script>
